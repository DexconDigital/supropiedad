$(document).ready(function () { $("#codigo_buscar").keyup(function () { $(this).val().length > 0 ? ($("#ciudad_buscar").attr("disabled", !0), $("#barrio_buscar").attr("disabled", !0), $("#tipo_inmueble_buscar").attr("disabled", !0), $("#tipo_gestion_buscar").attr("disabled", !0), $("#precio_minimo_buscar").attr("disabled", !0), $("#precio_maximo_buscar").attr("disabled", !0)) : ($("#ciudad_buscar").removeAttr("disabled"), $("#barrio_buscar").removeAttr("disabled"), $("#tipo_inmueble_buscar").removeAttr("disabled"), $("#tipo_gestion_buscar").removeAttr("disabled"), $("#precio_minimo_buscar").removeAttr("disabled"), $("#precio_maximo_buscar").removeAttr("disabled")) }), $.ajax({ url: "https://www.simi-api.com/ApiSimiweb/response/v2/departamento", type: "GET", beforeSend: function (a) { a.setRequestHeader("Authorization", "Basic " + btoa("Authorization:" + TOKEN)) }, dataType: "json", success: function (a) { for (var i = 0; i < a.length; i++)$.ajax({ url: "https://www.simi-api.com/ApiSimiweb/response/v2/ciudad/idDepartamento/" + a[i].id, type: "GET", beforeSend: function (a) { a.setRequestHeader("Authorization", "Basic " + btoa("Authorization:" + TOKEN)) }, dataType: "json", success: function (a) { for (var i = " ", e = 0; e < a.length; e++)i += '<option value="' + a[e].id + '">' + a[e].nombre + "</option>"; $("#ciudad_buscar").append(i) } }) } }), $("#ciudad_buscar").change(function () { var a = $("#ciudad_buscar option:selected").val(); $("#barrio_buscar").empty(), $.ajax({ url: "http://www.simi-api.com/ApiSimiweb/response/v2/barrios/idCiudad/" + a, type: "GET", beforeSend: function (a) { a.setRequestHeader("Authorization", "Basic " + btoa("Authorization:" + TOKEN)) }, dataType: "json", success: function (a) { var i = " "; i += '<option value="0">Barrio</option>'; for (var e = 0; e < a.length; e++)i += '<option value="' + a[e].id + '">' + a[e].nombre + "</option>"; $("#barrio_buscar").append(i) } }) }), $.ajax({ url: "https://www.simi-api.com/ApiSimiweb/response/gestion", type: "GET", beforeSend: function (a) { a.setRequestHeader("Authorization", "Basic " + btoa("Authorization:" + TOKEN)) }, dataType: "json", success: function (a) { for (var i = " ", e = 0; e < a.length; e++)i += '<option value="' + a[e].idGestion + '">' + a[e].Nombre + "</option>"; $("#tipo_gestion_buscar").append(i) } }), $.ajax({ url: "http://www.simi-api.com/ApiSimiweb/response/v2/tipoInmuebles/unique/1", type: "GET", beforeSend: function (a) { a.setRequestHeader("Authorization", "Basic " + btoa("Authorization:" + TOKEN)) }, dataType: "json", success: function (a) { console.log(a); for (var i = " ", e = 0; e < a.length; e++)i += '<option value="' + a[e].idTipoInm + '">' + a[e].Nombre + "</option>"; $("#tipo_inmueble_buscar").append(i) } }), $("#buscar").click(function () { busqueda_inicio() }), $("#buscar2").click(function () { busqueda_inmuebles() }), $("body").keyup(function (a) { "inicio" == pagina ? 13 == a.keyCode && busqueda_inicio() : "inmuebles" == pagina && 13 == a.keyCode && busqueda_inicio() }) }); var code, ciudad_buscar, barrio_buscar, gestion_buscar, tipo_inmueble_buscar, alcobas_buscar, banos_buscar, area_minima_buscar, area_maxima_buscar, precio_minimo_buscar, precio_maximo_buscar, busqueda_inicio = function () { code = $("#codigo_buscar").val(), ciudad_buscar = $("#ciudad_buscar option:selected").val(), barrio_buscar = $("#barrio_buscar option:selected").val(), gestion_buscar = $("#tipo_gestion_buscar option:selected").val(), tipo_inmueble_buscar = $("#tipo_inmueble_buscar option:selected").val(), banos_buscar = $("#banios_buscar").val(), alcobas_buscar = $("#alcobas_buscar").val(), area_minima_buscar = $("#area_minima_buscar").val(), area_maxima_buscar = $("#area_maxima_buscar").val(), precio_minimo_buscar = $("#precio_minimo_buscar").val(), precio_maximo_buscar = $("#precio_maximo_buscar").val(), ciudad_buscar = existeCampo(ciudad_buscar), barrio_buscar = existeCampo(barrio_buscar), gestion_buscar = existeCampo(gestion_buscar), tipo_inmueble_buscar = existeCampo(tipo_inmueble_buscar), window.location.href = "" !== code ? URLDOMAIN + "detalleInmueble/codigo/" + code : URLDOMAIN + "inmuebles/ciudad/" + ciudad_buscar + "/barrio/" + barrio_buscar + "/gestion/" + gestion_buscar + "/inmueble/" + tipo_inmueble_buscar + "/pagina/1" }, busqueda_inmuebles = function () { code = $("#codigo_buscar").val(), ciudad_buscar = $("#ciudad_buscar option:selected").val(), barrio_buscar = $("#barrio_buscar option:selected").val(), gestion_buscar = $("#tipo_gestion_buscar option:selected").val(), tipo_inmueble_buscar = $("#tipo_inmueble_buscar option:selected").val(), banos_buscar = $("#banios_buscar").val(), alcobas_buscar = $("#alcobas_buscar").val(), area_minima_buscar = $("#area_minima_buscar").val(), area_maxima_buscar = $("#area_maxima_buscar").val(), precio_minimo_buscar = $("#precio_minimo_buscar").val(), precio_maximo_buscar = $("#precio_maximo_buscar").val(), ciudad_buscar = existeCampo(ciudad_buscar), barrio_buscar = existeCampo(barrio_buscar), gestion_buscar = existeCampo(gestion_buscar), tipo_inmueble_buscar = existeCampo(tipo_inmueble_buscar), banos_buscar = existeCampo(banos_buscar), alcobas_buscar = existeCampo(alcobas_buscar), area_minima_buscar = existeCampo(area_minima_buscar), area_maxima_buscar = existeCampo(area_maxima_buscar), precio_minimo_buscar = existeCampo(precio_minimo_buscar), precio_maximo_buscar = existeCampo(precio_maximo_buscar), window.location.href = "" !== code ? URLDOMAIN + "detalleInmueble/codigo/" + code : URLDOMAIN + "inmuebles/ciudad/" + ciudad_buscar + "/barrio/" + barrio_buscar + "/gestion/" + gestion_buscar + "/inmueble/" + tipo_inmueble_buscar + "/banios/" + banos_buscar + "/alcobas/" + alcobas_buscar + "/areaMinima/" + area_minima_buscar + "/areaMaxima/" + area_maxima_buscar + "/precioMinimo/" + precio_minimo_buscar + "/precioMaximo/" + precio_maximo_buscar + "/pagina/1" };